[package]
name = "mqttd"
description = "mqttd is an MQTT broker for IoT Edge platform"
version = "0.1.0"
authors = ["Azure IoT Edge Devs"]
edition = "2018"

[dependencies]
regex = "1.3"
atty = "0.2"
clap = "2.33"
futures = "0.3"
futures-util = { version = "0.3", features = ["sink"] }
tokio = { version = "0.2", features = ["dns", "macros", "rt-threaded", "signal", "stream", "tcp", "time"] }
native-tls = "0.2"
tracing = "0.1"
tracing-subscriber = "0.1"
lazy_static = "1.4"

mqtt-broker = { path = "../mqtt-broker", default-features = false }
mqtt-broker-core = { path = "../mqtt-broker-core" }
mqtt-edgehub = { path = "../mqtt-edgehub", optional = true }
mqtt3 = { path = "../mqtt3", features = ["serde1"] }
chrono = "0.4"
anyhow = "1.0"

[dev-dependencies]
mockito = "0.25"
serde_json = "1.0"
tempfile = "3"

[features]
default = ["edgehub"]
edgehub = ["mqtt-broker/edgehub", "mqtt-edgehub"]
