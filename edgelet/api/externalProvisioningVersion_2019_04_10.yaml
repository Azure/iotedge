swagger: '2.0'
schemes:
  - http
info:
  title: IoT Edge External Provisioning Environment API
  version: '2019-04-10'
tags:
  - name: ExternalProvisioning
    x-displayName: ExternalProvisioning
    description: |

paths:
  '/edge/device/connectioninformation':
    get:
      tags:
        - ExternalProvisioning
      summary: Gets the IoT hub connection information of the device.
      produces:
        - application/json
      description: |
        This returns the IoT hub connection information of the device.
      operationId: GetDeviceConnectionInformation
      parameters:
        - $ref: '#/parameters/api-version'
      responses:
        '200':
          description: Ok
          schema:
            $ref: '#/definitions/DeviceConnectionInfo'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

definitions:
  DeviceConnectionInfo:
    type: object
    properties:
      hubName:
        type: string
        description: The host name of the IoT hub.
        example: mytesthub.azure-devices.net
      deviceId:
        type: string
        description: The ID of the device in IoT hub.
        example: device01
      credentials:
        $ref: '#/definitions/Credentials'
    required:
      - hubName
      - deviceId
      - credentials
  Credentials:
    type: object
    properties:
      type:
        type: string
        description: Indicates the format of the encoded certificate data.
        enum:
          - pem
      bytes:
        type: string
        format: byte
        description: PEM formatted byte array containing the certificate data encoded in base 64.
    required:
      - bytes
      - type

  ErrorResponse:
    type: object
    properties:
      message:
        type: string
    required:
      - message

parameters:
  api-version:
    name: api-version
    in: query
    description: The version of the API.
    required: true
    type: string
    default: '2019-04-10'
