FROM centos:centos7
ARG TOOLCHAIN="stable"

RUN yum install -y redhat-rpm-config \
        gcc \
        libtool patchutils \
        rpm-build \
        elfutils \
        gcc-c++ \
        make \
        rpm-sign \
        git \
        openssl-devel \
        libcurl-devel

COPY cmake.sh /                                                       
RUN bash /cmake.sh 3.11.4

RUN curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain "$TOOLCHAIN"
