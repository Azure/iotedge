[workspace]
members = [
    "aziot-edged",
    "docker-rs",
    "edgelet-core",
    "edgelet-docker",
    "edgelet-http",
    "edgelet-http-mgmt",
    "edgelet-http-workload",
    "edgelet-image-cleanup",
    "edgelet-settings",
    "edgelet-utils",
    "iotedge",
    "support-bundle",
]
resolver = "2"

# When removing this patch, also remember to remove the update to the identity service URL regex in
# scripts/local/test/DownloadIdentityService.ps1:
# 'github.com/Azure//?iot-identity-service\?branch=[ -~]+#(?<commit>\w+)'
#                   ^^ -- allows for optional 2nd forward slash between org name and repo name
[patch.'https://github.com/Azure/iot-identity-service']
aziot-cert-client-async = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-cert-common-http = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-certd-config = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-identity-client-async = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-identity-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-identity-common-http = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-identityd-config = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-key-client = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-key-client-async = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-key-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-key-common-http = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-key-openssl-engine = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-keyd-config = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-keys-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziot-tpmd-config = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
aziotctl-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
cert-renewal = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
config-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
http-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
logger = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
openssl-build = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
openssl-sys2 = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
openssl2 = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
pkcs11 = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
pkcs11-sys = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }
test-common = { git = "https://github.com/Azure//iot-identity-service", branch = "feature/snapping" }

[profile.dev]
panic = 'abort'

[profile.release]
panic = 'abort'
# Release builds will have full symbols. The packaging phase will strip symbols from binaries and
# make them available in a separate package.
debug = 2
