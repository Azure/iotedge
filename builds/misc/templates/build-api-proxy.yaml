variables:
- name: 'name'
  value: 'API proxy'
- name: 'imageName'
  value: 'api-proxy-module'
- name: 'project'
  value: 'api-proxy-module'
- name: 'configuration'
  value: 'release'  
- name: 'filePath'
  value: 'scripts/linux/buildAPIProxy.sh'

steps:
  - task: Bash@3
    displayName: Build API-Proxy - amd64
    inputs:
      filePath: ${{ variables.filePath }}
      arguments: -i ${{ variables.imageName }} -P ${{ variables.project }} -c ${{ variables.configuration }} --target-arch "x86_64"
  - task: Bash@3
    displayName: Build API-Proxy - arm32
    inputs:
      filePath: ${{ variables.filePath }}
      arguments: -i ${{ variables.imageName }} -P ${{ variables.project }} -c ${{ variables.configuration }} --target-arch "armv7l"
  - task: Bash@3
    displayName: Build API-Proxy - arm64
    inputs:
      filePath: ${{ variables.filePath }}
      arguments: -i ${{ variables.imageName }} -P ${{ variables.project }} -c ${{ variables.configuration }} --target-arch "aarch64"