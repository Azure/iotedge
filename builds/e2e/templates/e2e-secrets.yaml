parameters:
    azureSubscription: ''
    keyVaultName: ''

jobs:
  - job: Token
    displayName: 'Get SAS URI for Blob Storage Account'
    pool:
      name: $(pool.linux.name)
      demands:
        - ImageOverride -equals agent-aziotedge-ubuntu-22.04-msmoby
    steps:
      - template: e2e-vault-secrets.yaml
        parameters:
          azureSubscription: ${{ parameters.azureSubscription }}
          crossJobVariables: true
          keyVaultName: ${{ parameters.keyVaultName }}
      - template: storage-token.yaml
        parameters:
          azureSubscription: ${{ parameters.azureSubscription }}
