trigger: none
pr: none

resources:
  pipelines:
  - pipeline: ci-build
    source: 'Azure-IoT-Edge-Core CI Build'
    branch: 'main'
    trigger:
      branches:
      - main
      - release/*

variables:
  Codeql.Enabled: false
  DisableDockerDetector: true
  # A 'minimal' pipeline only runs one end-to-end test (TempSensor). This is useful for platforms or
  # environments that are very similar to other platforms/environments in our matrix, e.g., Ubuntu
  # 20.04 with the 'docker-ce' package vs. Ubuntu 20.04 with the 'iotedge-moby' package vs. the same
  # variations in Ubuntu 22.04. In these instances the platforms/environments are so similar that we
  # don't reasonably expect to encounter differences--if we do, it would likely manifest during
  # installation, or in running a very basic test. We don't need to repeat the entire test suite.
  # The 'minimal' variable defaults to 'false'; we override it in specific jobs as needed.
  minimal: false
  verbose: false

jobs:

  - template: templates/e2e-secrets.yaml
    parameters:
      azureSubscription: $(az.subscription)
      keyVaultName: $(kv.name)
  - template: templates/e2e-jobs.yaml
